import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/auth")
public class SignInController {

    private final AuthService authService;

    public SignInController(AuthService authService) {
        this.authService = authService;
    }

    // Using @GetMapping to handle sign-in
    @GetMapping("/signin")
    public AuthResponse signIn(@RequestParam String username, @RequestParam String password) {
        String role = authService.authenticate(username, password);

        if (role != null) {
            return new AuthResponse("Authentication Successful", role);
        } else {
            return new AuthResponse("Authentication Failed", null);
        }
    }

    // DTO for the Authentication Response
    public static class AuthResponse {
        private String message;
        private String role;

        public AuthResponse(String message, String role) {
            this.message = message;
            this.role = role;
        }

        // Getters and Setters
    }
}
